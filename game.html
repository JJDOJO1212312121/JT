<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>MY HEART IS YO</title>
<style>
body { background: #111; margin: 0; font-family: sans-serif; color: #fff; text-align: center; }
canvas { background: #222; display: block; margin: 10px auto; border-radius: 8px; touch-action: none; }
.controls { display: flex; justify-content: center; gap: 10px; margin-top: 5px; }
button { padding: 10px 16px; font-size: 18px; border: none; border-radius: 6px; background: #444; color: #fff; }
</style>
</head>
<body>
<h2>GAME: MY HEART IS YO</h2>

<!-- ‡πÄ‡∏û‡∏•‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö -->
<audio id="bgm" src="bgm.mp3" loop></audio>
<audio id="over" src="gameover.mp3"></audio>

<canvas id="game" width="360" height="640"></canvas>
<div class="controls">
<button id="left">‚óÄÔ∏è</button>
<button id="right">‚ñ∂Ô∏è</button>
<button id="restart">üîÑ</button>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

const W = canvas.width, H = canvas.height;

// ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏´‡∏±‡∏ß‡πÉ‡∏à (‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô)
const heartImg = new Image();
let heartLoaded = false;
heartImg.src = 'heart.png';
heartImg.onload = () => heartLoaded = true;

// ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡πÇ‡∏¢‡∏•‡∏≠‡∏á‡∏î‡∏µ (‡∏™‡∏¥‡πà‡∏á‡∏Å‡∏µ‡∏î‡∏Ç‡∏ß‡∏≤‡∏á)
const faceImg = new Image();
let faceLoaded = false;
faceImg.src = 'yolongdee.png';
faceImg.onload = () => faceLoaded = true;

const player = { x: W/2 - 24, y: H - 80, w: 48, h: 48, speed: 6 };
let obstacles = [];
let score = 0;
let spawnTime = 1000;
let lastSpawn = 0;
let running = true;

// ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏û‡∏•‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á
function startMusic() {
const bgm = document.getElementById("bgm");
bgm.play().catch(() => {
document.body.addEventListener("click", () => bgm.play(), { once: true });
});
}

function spawnObstacle() {
let size = 48 + Math.random() * 32;
let x = Math.random() * (W - size);
let y = -size;
let speed = 2 + Math.random() * 2 + Math.min(3, score / 10);
obstacles.push({x, y, w: size, h: size, speed});
}

function update(dt) {
lastSpawn += dt;
if (lastSpawn > spawnTime) {
spawnObstacle();
lastSpawn = 0;
if (spawnTime > 400) spawnTime *= 0.985;
}

for (let i = obstacles.length - 1; i >= 0; i--) {
let o = obstacles[i];
o.y += o.speed;
if (checkCollision(player, o)) {
if (running) {
running = false;
document.getElementById("over").play();
}
}
if (o.y > H) {
obstacles.splice(i, 1);
if (running) score++;
}
}
}

function checkCollision(a, b) {
return a.x < b.x + b.w &&
a.x + a.w > b.x &&
a.y < b.y + b.h &&
a.y + a.h > b.y;
}

// ‡∏ß‡∏≤‡∏î‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏î‡πâ‡∏ß‡∏¢‡πÇ‡∏Ñ‡πâ‡∏î (‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏π‡∏õ)
function drawHeart(x, y, w, h) {
ctx.fillStyle = "red";
ctx.beginPath();
const top = h * 0.3;
ctx.moveTo(x + w/2, y + h);
ctx.bezierCurveTo(x + w, y + h - top, x + w, y + top, x + w/2, y + top/2);
ctx.bezierCurveTo(x, y + top, x, y + h - top, x + w/2, y + h);
ctx.fill();
}

function draw() {
ctx.clearRect(0, 0, W, H);

// ‡∏ß‡∏≤‡∏î‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô (‡∏´‡∏±‡∏ß‡πÉ‡∏à)
if (heartLoaded) ctx.drawImage(heartImg, player.x, player.y, player.w, player.h);
else drawHeart(player.x, player.y, player.w, player.h);

// ‡∏ß‡∏≤‡∏î‡∏™‡∏¥‡πà‡∏á‡∏Å‡∏µ‡∏î‡∏Ç‡∏ß‡∏≤‡∏á
for (let o of obstacles) {
if (faceLoaded) ctx.drawImage(faceImg, o.x, o.y, o.w, o.h);
else {
ctx.fillStyle = "orange";
ctx.beginPath();
ctx.arc(o.x + o.w/2, o.y + o.h/2, o.w/2, 0, Math.PI*2);
ctx.fill();
}
}

// ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
ctx.fillStyle = "#fff";
ctx.font = "20px Arial";
ctx.textAlign = "left";
ctx.fillText("‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: " + score, 10, 25);

// Game Over
if (!running) {
ctx.fillStyle = "yellow";
ctx.font = "36px Arial";
ctx.textAlign = "center";
ctx.fillText("Game Over", W/2, H/2);
ctx.font = "20px Arial";
ctx.fillText("‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: " + score, W/2, H/2 + 30);
}
}

// ‡πÄ‡∏Å‡∏°‡∏•‡∏π‡∏õ
function loop(timestamp) {
if (!this.last) this.last = timestamp;
let dt = timestamp - this.last;
this.last = timestamp;

if (running) {
if (moveLeft) player.x -= player.speed;
if (moveRight) player.x += player.speed;
player.x = Math.max(0, Math.min(W - player.w, player.x));
update(dt);
}
draw();
requestAnimationFrame(loop.bind(this));
}
requestAnimationFrame(loop.bind({}));
startMusic();

// ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏î‡πâ‡∏ß‡∏¢‡∏õ‡∏∏‡πà‡∏°‡∏Ñ‡∏µ‡∏¢‡πå‡∏ö‡∏≠‡∏£‡πå‡∏î
let moveLeft = false, moveRight = false;
window.addEventListener("keydown", e => {
if (e.key === "ArrowLeft" || e.key === "a") moveLeft = true;
if (e.key === "ArrowRight" || e.key === "d") moveRight = true;
if (e.key === "r") restart();
});
window.addEventListener("keyup", e => {
if (e.key === "ArrowLeft" || e.key === "a") moveLeft = false;
if (e.key === "ArrowRight" || e.key === "d") moveRight = false;
});

// ‡∏õ‡∏∏‡πà‡∏°‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠
document.getElementById("left").addEventListener("mousedown", () => moveLeft = true);
document.getElementById("left").addEventListener("mouseup", () => moveLeft = false);
document.getElementById("right").addEventListener("mousedown", () => moveRight = true);
document.getElementById("right").addEventListener("mouseup", () => moveRight = false);
document.getElementById("restart").addEventListener("click", restart);

// ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏∞‡∏ö‡∏ö‡∏•‡∏≤‡∏Å‡∏ô‡∏¥‡πâ‡∏ß (pointer) ‡∏ö‡∏ô‡πÅ‡∏Ñ‡∏ô‡∏ß‡∏≤‡∏™ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô
let pointerActive = false;
canvas.addEventListener('pointerdown', e => {
pointerActive = true;
movePlayerToPointer(e);
});
canvas.addEventListener('pointermove', e => {
if (pointerActive) movePlayerToPointer(e);
});
canvas.addEventListener('pointerup', e => {
pointerActive = false;
});
canvas.addEventListener('pointercancel', e => {
pointerActive = false;
});

function movePlayerToPointer(e) {
const rect = canvas.getBoundingClientRect();
let x = e.clientX - rect.left;
player.x = x - player.w / 2;
player.x = Math.max(0, Math.min(W - player.w, player.x));
}

// ‡∏£‡∏µ‡∏™‡∏ï‡∏≤‡∏£‡πå‡∏ó‡πÄ‡∏Å‡∏°
function restart() {
obstacles = [];
score = 0;
spawnTime = 1000;
running = true;
player.x = W/2 - player.w/2;
}
</script>
</body>
</html>






